
class Board

  def initialize(tiles, target)
    @target = target
    @tiles = tiles
    @data = Array.new(target + 1, [])
    @data[0] = [Hash.new(0)]
  end

  def solve
    @tiles.each do |tile|
      (0 .. (@target - tile)).each do |i|
        @data[tile + i] += @data[i].map { |tile_hash| tile_hash[tile] += 1 }
      end
    end

    @data[-1]
  end

end

p Board.new([*1..4], 5)
